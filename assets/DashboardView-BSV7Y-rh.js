const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-Dflmv_7l.js","assets/index-CfONCmap.css"])))=>i.map(i=>d[i]);
import{g as y,i as Y,q as R,c as x,a as v,o as m,d as t,F as B,s as N,n as P,b as C,t as p,u as U,f as G,M as j,j as S,k as $,m as w,e as f,x as k,p as K,y as J,_ as Q}from"./index-Dflmv_7l.js";import{u as X}from"./amalan-DUa7kzA4.js";import{_ as D}from"./AppButton-DRH2BFyc.js";import{g as W,a as Z}from"./date-p3dfQt3G.js";function tt(h,d=80){const u=y(!1),a=y(0),n=y(0);let r=!1;function o(c){window.scrollY===0&&(a.value=c.touches[0].clientY)}function i(c){if(window.scrollY===0&&!r){n.value=c.touches[0].clientY;const s=n.value-a.value;s>10&&(c.preventDefault(),u.value=s>d)}}async function b(){if(u.value&&!r){r=!0;try{await h()}finally{r=!1}}u.value=!1,a.value=0,n.value=0}return Y(()=>{document.addEventListener("touchstart",o,{passive:!1}),document.addEventListener("touchmove",i,{passive:!1}),document.addEventListener("touchend",b)}),R(()=>{document.removeEventListener("touchstart",o),document.removeEventListener("touchmove",i),document.removeEventListener("touchend",b)}),{isPulling:u}}const et={class:"space-y-4"},st={class:"bg-white/10 backdrop-blur-sm rounded-2xl p-3 border border-white/20"},rt={class:"grid grid-cols-4 gap-3"},at=["onClick"],ot={key:0,class:"absolute inset-0 bg-gradient-to-r from-pink-500 to-purple-500 rounded-xl animate-pulse-soft"},nt={class:"relative z-10"},it={class:"text-lg font-bold"},lt={class:"text-xs opacity-80 mt-1"},dt={class:"text-center bg-gradient-to-r from-pink-50 to-purple-50 rounded-xl p-4 border border-pink-200/50"},ut={class:"text-sm font-medium text-gray-700"},ct={__name:"WeekSelector",props:{currentWeek:Number,currentMonth:Number,currentYear:Number},emits:["week-changed"],setup(h){const d=h,u=x(()=>{const r=W(d.currentWeek,d.currentMonth,d.currentYear),o=Z(d.currentMonth);return`${r.startDate}-${r.endDate} ${o} ${d.currentYear}`});function a(r){return r===d.currentWeek?"text-white shadow-lg transform scale-105":"text-gray-700 bg-white/50 hover:bg-white/70 hover:scale-102 shadow-sm"}function n(r){const o=W(r,d.currentMonth,d.currentYear);return`${o.startDate}-${o.endDate}`}return(r,o)=>(m(),v("div",et,[t("div",st,[t("div",rt,[(m(),v(B,null,N(4,i=>t("button",{key:i,class:P([a(i),"relative py-4 px-4 rounded-xl font-semibold transition-all duration-300 text-sm group overflow-hidden"]),onClick:b=>r.$emit("week-changed",i)},[i===h.currentWeek?(m(),v("div",ot)):C("",!0),t("div",nt,[t("div",it,"W"+p(i),1),t("div",lt,p(n(i)),1)]),o[0]||(o[0]=t("div",{class:"absolute inset-0 bg-white/10 opacity-0 group-hover:opacity-100 transition-opacity duration-200 rounded-xl"},null,-1))],10,at)),64))])]),t("div",dt,[t("p",ut,p(u.value),1),o[1]||(o[1]=t("p",{class:"text-xs text-gray-500 mt-2 italic"},' "وَاذْكُرْ رَبَّكَ كَثِيرًا" - Ingatlah Allah sebanyak-banyaknya ',-1))])]))}},pt={class:"relative flex items-center justify-center w-16 h-16 mx-auto mb-4"},mt={class:"absolute inset-0 w-16 h-16 transform -rotate-90",viewBox:"0 0 64 64"},gt=["stroke","stroke-dasharray"],vt={class:"relative z-10 w-12 h-12 bg-gradient-to-br from-pink-400 to-purple-500 rounded-full flex items-center justify-center text-white font-bold text-lg shadow-lg"},ht={class:"text-center font-bold text-gray-800 mb-2"},xt={class:"flex items-center justify-center gap-1 mb-4"},bt={class:"font-semibold text-gray-700"},ft={class:"space-y-3"},kt={class:"text-center"},wt={class:"text-2xl font-bold bg-gradient-to-r from-pink-500 to-purple-600 bg-clip-text text-transparent"},yt={class:"grid grid-cols-2 gap-3 text-center"},_t={class:"bg-gradient-to-br from-pink-50 to-pink-100 rounded-lg p-2"},$t={class:"font-bold text-pink-600"},Ct={class:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-lg p-2"},Mt={class:"font-bold text-purple-600"},Tt={key:0,class:"absolute top-3 right-3"},Dt={__name:"MemberCard",props:{member:String,data:Object},emits:["click"],setup(h){const d=h,u=x(()=>Math.floor(Math.random()*15)+1),a=x(()=>140),n=x(()=>{const c=d.data.completedAmalan||0,s=a.value;return s>0?Math.round(c/s*100):0}),r=x(()=>2*Math.PI*28),o=x(()=>{const c=n.value;return c>=80?"rgb(34 197 94)":c>=60?"rgb(251 191 36)":c>=40?"rgb(249 115 22)":"rgb(239 68 68)"}),i=x(()=>n.value>=90||u.value>=7),b=x(()=>({"ring-2 ring-pink-300/50 shadow-pink-200/50":n.value>=80}));return(c,s)=>(m(),v("div",{class:P([b.value,"relative bg-white/80 backdrop-blur-sm rounded-2xl p-6 cursor-pointer transition-all duration-300 hover:shadow-xl hover:scale-[1.02] group overflow-hidden border border-white/20"]),onClick:s[0]||(s[0]=_=>c.$emit("click"))},[s[7]||(s[7]=t("div",{class:"absolute top-0 right-0 w-20 h-20 bg-gradient-to-br from-pink-200/30 to-purple-200/30 rounded-full -mr-10 -mt-10"},null,-1)),t("div",pt,[(m(),v("svg",mt,[s[1]||(s[1]=t("circle",{cx:"32",cy:"32",r:"28",fill:"none",stroke:"rgb(230 227 232)","stroke-width":"4"},null,-1)),t("circle",{cx:"32",cy:"32",r:"28",fill:"none",stroke:o.value,"stroke-width":"4","stroke-linecap":"round","stroke-dasharray":`${r.value*n.value/100} ${r.value}`,class:"transition-all duration-1000 ease-out"},null,8,gt)])),t("div",vt,p(h.member),1)]),t("h4",ht,p(h.member),1),t("div",xt,[s[2]||(s[2]=t("span",{class:"text-orange-500 text-lg"},"🔥",-1)),t("span",bt,p(u.value)+" hari",1)]),t("div",ft,[t("div",kt,[t("div",wt,p(n.value)+"% ",1),s[3]||(s[3]=t("div",{class:"text-xs text-gray-500"},"Target tercapai",-1))]),t("div",yt,[t("div",_t,[t("div",$t,p(h.data.completedAmalan||0),1),s[4]||(s[4]=t("div",{class:"text-xs text-pink-500"},"Selesai",-1))]),t("div",Ct,[t("div",Mt,p(a.value),1),s[5]||(s[5]=t("div",{class:"text-xs text-purple-500"},"Target",-1))])])]),i.value?(m(),v("div",Tt,s[6]||(s[6]=[t("div",{class:"w-6 h-6 bg-gradient-to-r from-yellow-400 to-orange-500 rounded-full flex items-center justify-center"},[t("span",{class:"text-white text-xs"},"🏆")],-1)]))):C("",!0),s[8]||(s[8]=t("div",{class:"absolute inset-0 bg-gradient-to-br from-pink-400/20 to-purple-500/20 rounded-2xl opacity-0 group-hover:opacity-100 transition-opacity duration-300 pointer-events-none"},null,-1))],2))}},St={class:"min-h-screen bg-gradient-to-br from-pink-50 via-purple-50 to-indigo-50"},At={class:"bg-white/80 backdrop-blur-sm border-b border-white/20 sticky top-0 z-40 shadow-sm"},Et={class:"max-w-md mx-auto px-4 py-4"},Lt={class:"flex items-center justify-between"},jt={class:"flex items-center gap-2"},Wt={key:0,class:"absolute right-0 mt-2 w-48 bg-white/90 backdrop-blur-sm rounded-xl shadow-lg border border-white/20 py-2 z-50"},Yt={class:"max-w-md mx-auto p-4 space-y-6"},Rt={class:"bg-gradient-to-r from-pink-500 to-purple-600 rounded-2xl p-6 text-white shadow-xl"},Bt={class:"mt-4 text-sm opacity-90"},Nt={class:"bg-white/60 backdrop-blur-sm rounded-2xl p-6 border border-white/20 shadow-sm"},Pt={class:"bg-white/60 backdrop-blur-sm rounded-2xl p-6 border border-white/20 shadow-sm"},zt={class:"grid grid-cols-2 gap-4"},It={class:"bg-white/60 backdrop-blur-sm rounded-2xl p-6 border border-white/20 shadow-sm"},Vt={class:"grid grid-cols-2 gap-4"},Ft={key:0,class:"bg-white/60 backdrop-blur-sm rounded-2xl p-6 border border-white/20 shadow-sm"},Ht={class:"grid grid-cols-3 gap-4"},Ot={class:"text-center bg-gradient-to-br from-pink-50 to-pink-100 rounded-xl p-4"},qt={class:"text-2xl font-bold text-pink-600"},Ut={class:"text-center bg-gradient-to-br from-purple-50 to-purple-100 rounded-xl p-4"},Gt={class:"text-2xl font-bold text-purple-600"},Kt={class:"text-center bg-gradient-to-br from-indigo-50 to-indigo-100 rounded-xl p-4"},Jt={class:"text-xl font-bold text-indigo-600"},Qt={key:0,class:"fixed top-20 left-1/2 transform -translate-x-1/2 z-50"},se={__name:"DashboardView",setup(h){const d=K(),u=U(),a=X(),n=G(),r=y(!1),o=y(!1),i=y(null),{isPulling:b}=tt(z),c=x(()=>u.loginTime?new Date(parseInt(u.loginTime)).toLocaleString("id-ID",{hour:"2-digit",minute:"2-digit",day:"numeric",month:"short"}):"-"),s=x(()=>{const l=a.dashboardData;if(!l||typeof l!="object")return null;const e=Object.values(l),g=e.reduce((M,T)=>M+(T.totalAmalan||0),0),L=e.length>0?(g/e.length).toFixed(1):0,O=e.reduce((M,T,q)=>(T.totalAmalan||0)>(M.totalAmalan||0)?{...T,name:j[q]}:M,{}).name||"-";return{total:g,average:L,topMember:O}});Y(async()=>{await _(),H()}),R(()=>{document.removeEventListener("click",E)});async function _(){try{await a.loadDashboardData()}catch{n.showToast("Gagal memuat data dashboard","error")}}async function z(){await _(),n.showToast("Data berhasil diperbarui","success")}async function A(){try{o.value=!0;const{api:l}=await Q(async()=>{const{api:e}=await import("./index-Dflmv_7l.js").then(g=>g.J);return{api:e}},__vite__mapDeps([0,1]));await l.syncData(),await _(),n.showToast("Sinkronisasi berhasil","success")}catch{n.showToast("Gagal sinkronisasi","error")}finally{o.value=!1}}async function I(l){a.setCurrentWeek(l),await _()}function V(l){d.push({name:"detail",params:{member:l},query:{week:a.currentWeek,month:a.currentMonth,year:a.currentYear}})}function F(){u.logout(),r.value=!1}function H(){document.addEventListener("click",E)}function E(l){i.value&&!i.value.contains(l.target)&&(r.value=!1)}return(l,e)=>(m(),v("div",St,[t("header",At,[t("div",Et,[t("div",Lt,[e[3]||(e[3]=S('<div class="flex items-center gap-3"><div class="w-10 h-10 bg-gradient-to-br from-pink-500 to-purple-600 rounded-xl flex items-center justify-center"><span class="text-white text-lg">📿</span></div><div><h1 class="text-lg font-bold text-gray-800">Amalan Tracker</h1><p class="text-xs text-gray-500">بِسْمِ اللَّهِ الرَّحْمَنِ الرَّحِيم</p></div></div>',1)),t("div",jt,[$(D,{variant:"ghost",size:"sm",loading:o.value,onClick:A,class:"text-gray-600 hover:text-pink-600"},{icon:w(()=>e[2]||(e[2]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1)])),_:1},8,["loading"]),t("div",{class:"relative",ref_key:"userMenuRef",ref:i},[$(D,{variant:"ghost",size:"sm",onClick:e[0]||(e[0]=g=>r.value=!r.value),class:"text-gray-600 hover:text-pink-600"},{default:w(()=>[f(p(k(u).user),1)]),_:1}),r.value?(m(),v("div",Wt,[t("button",{class:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-pink-50 transition-colors",onClick:F}," Keluar ")])):C("",!0)],512)])])])]),t("main",Yt,[t("div",Rt,[e[4]||(e[4]=S('<h2 class="text-xl font-bold mb-2">🌅 Focus Hari Ini</h2><div class="space-y-2"><div class="flex items-center gap-2"><span class="text-yellow-300">⭐</span><span>Dzikir pagi &amp; petang</span></div><div class="flex items-center gap-2"><span class="text-yellow-300">📖</span><span>Tilawah 2 halaman</span></div><div class="flex items-center gap-2"><span class="text-yellow-300">🤲</span><span>Istighfar 100x</span></div></div>',2)),t("div",Bt," Login: "+p(c.value),1)]),t("div",Nt,[e[5]||(e[5]=t("h3",{class:"font-bold text-gray-800 mb-4 flex items-center gap-2"},[t("span",null,"📅"),f(" Pilih Pekan ")],-1)),$(ct,{"current-week":k(a).currentWeek,"current-month":k(a).currentMonth,"current-year":k(a).currentYear,onWeekChanged:I},null,8,["current-week","current-month","current-year"])]),t("div",Pt,[e[6]||(e[6]=t("div",{class:"flex justify-between items-center mb-4"},[t("h3",{class:"font-bold text-gray-800 flex items-center gap-2"},[t("span",null,"👥"),f(" Anggota Keluarga ")]),t("p",{class:"text-sm text-gray-500"},"Tap untuk detail")],-1)),t("div",zt,[(m(!0),v(B,null,N(k(j),g=>(m(),J(Dt,{key:g,member:g,data:k(a).dashboardData[g]||{},onClick:L=>V(g)},null,8,["member","data","onClick"]))),128))])]),t("div",It,[e[11]||(e[11]=t("h3",{class:"font-bold text-gray-800 mb-4 flex items-center gap-2"},[t("span",null,"⚡"),f(" Aksi Cepat ")],-1)),t("div",Vt,[$(D,{variant:"outline",class:"w-full bg-gradient-to-r from-blue-50 to-blue-100 border-blue-200 text-blue-700 hover:from-blue-100 hover:to-blue-200",onClick:e[1]||(e[1]=g=>l.$router.push("/report"))},{icon:w(()=>e[7]||(e[7]=[t("span",{class:"text-lg"},"📊",-1)])),default:w(()=>[e[8]||(e[8]=f(" Laporan Bulanan "))]),_:1,__:[8]}),$(D,{variant:"secondary",class:"w-full bg-gradient-to-r from-emerald-50 to-emerald-100 border-emerald-200 text-emerald-700 hover:from-emerald-100 hover:to-emerald-200",onClick:A,loading:o.value},{icon:w(()=>e[9]||(e[9]=[t("span",{class:"text-lg"},"🔄",-1)])),default:w(()=>[e[10]||(e[10]=f(" Sinkronisasi "))]),_:1,__:[10]},8,["loading"])])]),s.value?(m(),v("div",Ft,[e[15]||(e[15]=t("h3",{class:"font-bold text-gray-800 mb-4 flex items-center gap-2"},[t("span",null,"📊"),f(" Statistik Pekan Ini ")],-1)),t("div",Ht,[t("div",Ot,[t("div",qt,p(s.value.total||0),1),e[12]||(e[12]=t("div",{class:"text-xs text-pink-500 uppercase tracking-wide"},"Total Amalan",-1))]),t("div",Ut,[t("div",Gt,p(s.value.average||0),1),e[13]||(e[13]=t("div",{class:"text-xs text-purple-500 uppercase tracking-wide"},"Rata-rata",-1))]),t("div",Kt,[t("div",Jt,p(s.value.topMember||"-"),1),e[14]||(e[14]=t("div",{class:"text-xs text-indigo-500 uppercase tracking-wide"},"Teraktif",-1))])])])):C("",!0),e[16]||(e[16]=S('<div class="bg-gradient-to-r from-emerald-50 to-teal-50 rounded-2xl p-6 border border-emerald-200/50 shadow-sm"><div class="text-center"><div class="text-2xl mb-3">🌙</div><p class="text-sm text-gray-700 font-medium leading-relaxed"> &quot;Dan ingatlah kepada Tuhanmu dalam hatimu dengan merendahkan diri dan rasa takut&quot; </p><p class="text-xs text-gray-500 mt-2">- QS Al-A&#39;raf: 205</p></div></div>',1))]),k(b)?(m(),v("div",Qt,e[17]||(e[17]=[t("div",{class:"bg-white/90 backdrop-blur-sm rounded-full p-3 shadow-lg border border-white/20"},[t("svg",{class:"w-6 h-6 animate-spin text-pink-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})])],-1)]))):C("",!0)]))}};export{se as default};
