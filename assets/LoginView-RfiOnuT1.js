import{_ as U,u as V,a as P,r as b,b as g,c as h,o as E,d as o,e as s,f as l,g as y,w as D,h as _,i as v,v as F,n as M,t as S,j as N,k as $,l as z,m as n}from"./index-DIpgO66S.js";const H={class:"min-h-screen flex items-center justify-center p-3 sm:p-4 bg-gradient-to-br from-pink-50 via-purple-50 to-indigo-50"},q={class:"w-full max-w-md animate-fade-in"},R={class:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-xl overflow-hidden border border-white/20 transform hover:shadow-2xl transition-shadow duration-300"},W={class:"space-y-2"},J={class:"relative"},O=["disabled","aria-invalid","aria-describedby"],G={key:0,class:"absolute right-3 top-1/2 transform -translate-y-1/2"},K={key:0,id:"username-error",class:"text-red-600 text-xs mt-1 flex items-center gap-1",role:"alert"},Q={class:"space-y-2"},X={class:"relative"},Y=["type","disabled","aria-invalid","aria-describedby"],Z=["aria-label","disabled"],ee={class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},se={key:0,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"},ae={key:1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"},te={key:2,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.878 9.878L3 3m6.878 6.878L21 21"},re={key:0,id:"password-error",class:"text-red-600 text-xs mt-1 flex items-center gap-1",role:"alert"},oe={class:"flex items-center justify-between"},ne={class:"flex items-center"},ie=["disabled"],de=["disabled"],le={key:0,class:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",role:"alert"},ue=["disabled","aria-label"],me={key:0,class:"flex items-center justify-center gap-2"},pe={key:1},ce={key:0,class:"fixed inset-0 bg-black/20 backdrop-blur-sm flex items-center justify-center z-50"},be={__name:"LoginView",setup(fe){const j=z(),T=V(),m=P(),i=b(!1),u=b(!1),p=b(0),w=b(0),t=g({username:"",password:"",rememberMe:!1}),r=g({username:"",password:""}),L=h(()=>t.username.trim()&&t.password&&!f.value),f=h(()=>p.value<3?!1:Date.now()-w.value<3e4);E(()=>{B(),document.getElementById("username")?.focus()});function B(){try{const a=localStorage.getItem("saved_credentials");if(a){const{username:e}=JSON.parse(a);t.username=e,t.rememberMe=!0,setTimeout(()=>{document.getElementById("password")?.focus()},100)}}catch(a){console.warn("Failed to load saved credentials:",a)}}function x(a){return r[a]?"border-red-300 bg-red-50 focus:border-red-500":t[a]?"border-green-300 bg-green-50 focus:border-green-500":"border-gray-300 bg-white"}function c(a){r[a]="",a==="username"&&(t.username.trim()?t.username.length<3&&(r.username="Username minimal 3 karakter"):r.username="Username wajib diisi"),a==="password"&&(t.password?t.password.length<6&&(r.password="Password minimal 6 karakter"):r.password="Password wajib diisi")}function k(a){r[a]&&(r[a]="")}function A(){return c("username"),c("password"),!r.username&&!r.password}async function C(){if(A()){if(f.value){m.showToast("Terlalu banyak percobaan. Silakan tunggu sebentar.","warning");return}try{i.value=!0;const a=await T.login({username:t.username.trim(),password:t.password,rememberMe:t.rememberMe});if(a.success)p.value=0,m.showToast("Login berhasil! Barakallahu fiik","success"),setTimeout(()=>{j.push("/dashboard")},1e3);else{p.value++,w.value=Date.now(),t.password="";let e=a.message||"Login gagal";a.message?.includes("password")?(e="Username atau password salah",r.password="Periksa kembali password Anda"):a.message?.includes("username")&&(r.username="Username tidak ditemukan"),m.showToast(e,"error"),r.username?document.getElementById("username")?.focus():document.getElementById("password")?.focus()}}catch(a){console.error("Login error:",a),m.showToast("Terjadi kesalahan. Periksa koneksi internet Anda.","error"),t.password=""}finally{i.value=!1}}}function I(){m.showToast("Hubungi admin untuk reset password","info")}return(a,e)=>(n(),o("div",H,[s("div",q,[e[18]||(e[18]=s("div",{class:"text-center mb-6 sm:mb-8"},[s("div",{class:"bg-white/60 backdrop-blur-sm rounded-2xl p-4 sm:p-6 mb-4 sm:mb-6 border border-white/20 shadow-sm transform hover:scale-[1.02] transition-transform duration-300"},[s("h1",{class:"text-xl sm:text-2xl font-bold text-gray-800 mb-2 font-arabic leading-relaxed"}," بِسْمِ اللَّهِ الرَّحْمَنِ الرَّحِيم "),s("p",{class:"text-sm sm:text-base text-gray-600 italic"}," Assalamu'alaikum Warahmatullahi Wabarakatuh ")])],-1)),s("div",R,[e[16]||(e[16]=y('<div class="text-center p-4 sm:p-6 bg-gradient-to-r from-pink-500 to-purple-600" data-v-dad93f0e><div class="w-12 h-12 sm:w-16 sm:h-16 mx-auto bg-white/20 rounded-xl flex items-center justify-center mb-3 sm:mb-4 animate-pulse-soft" data-v-dad93f0e><span class="text-2xl sm:text-3xl text-white" data-v-dad93f0e>📿</span></div><h2 class="text-xl sm:text-2xl font-bold text-white mb-1 sm:mb-2" data-v-dad93f0e>Amalan Tracker</h2><p class="text-pink-100 text-sm sm:text-base" data-v-dad93f0e>Silakan masuk untuk melanjutkan</p></div>',1)),s("form",{onSubmit:D(C,["prevent"]),class:"p-4 sm:p-6 space-y-4 sm:space-y-6",autocomplete:"on"},[s("div",W,[e[10]||(e[10]=s("label",{for:"username",class:"block text-sm font-medium text-gray-700"},[_(" Username "),s("span",{class:"text-red-500","aria-label":"required"},"*")],-1)),s("div",J,[v(s("input",{id:"username","onUpdate:modelValue":e[0]||(e[0]=d=>t.username=d),type:"text",autocomplete:"username",class:M([x("username"),"w-full px-4 py-3 border rounded-xl transition-all duration-200 focus:ring-2 focus:ring-pink-500/20 focus:border-pink-500 text-sm sm:text-base min-h-[44px]"]),placeholder:"Masukkan username",disabled:i.value,"aria-invalid":!!r.username,"aria-describedby":r.username?"username-error":void 0,onBlur:e[1]||(e[1]=d=>c("username")),onInput:e[2]||(e[2]=d=>k("username"))},null,42,O),[[F,t.username]]),t.username?(n(),o("div",G,e[8]||(e[8]=[s("span",{class:"text-green-500"},"✓",-1)]))):l("",!0)]),r.username?(n(),o("div",K,[e[9]||(e[9]=s("span",null,"⚠️",-1)),s("span",null,S(r.username),1)])):l("",!0)]),s("div",Q,[e[12]||(e[12]=s("label",{for:"password",class:"block text-sm font-medium text-gray-700"},[_(" Password "),s("span",{class:"text-red-500","aria-label":"required"},"*")],-1)),s("div",X,[v(s("input",{id:"password","onUpdate:modelValue":e[3]||(e[3]=d=>t.password=d),type:u.value?"text":"password",autocomplete:"current-password",class:M([x("password"),"w-full px-4 py-3 pr-12 border rounded-xl transition-all duration-200 focus:ring-2 focus:ring-pink-500/20 focus:border-pink-500 text-sm sm:text-base min-h-[44px]"]),placeholder:"Masukkan password",disabled:i.value,"aria-invalid":!!r.password,"aria-describedby":r.password?"password-error":void 0,onBlur:e[4]||(e[4]=d=>c("password")),onInput:e[5]||(e[5]=d=>k("password"))},null,42,Y),[[N,t.password]]),s("button",{type:"button",onClick:e[6]||(e[6]=d=>u.value=!u.value),class:"absolute right-3 top-1/2 transform -translate-y-1/2 p-1 text-gray-500 hover:text-gray-700 transition-colors rounded","aria-label":u.value?"Hide password":"Show password",disabled:i.value,tabindex:"0"},[(n(),o("svg",ee,[u.value?l("",!0):(n(),o("path",se)),u.value?l("",!0):(n(),o("path",ae)),u.value?(n(),o("path",te)):l("",!0)]))],8,Z)]),r.password?(n(),o("div",re,[e[11]||(e[11]=s("span",null,"⚠️",-1)),s("span",null,S(r.password),1)])):l("",!0)]),s("div",oe,[s("div",ne,[v(s("input",{id:"rememberMe","onUpdate:modelValue":e[7]||(e[7]=d=>t.rememberMe=d),type:"checkbox",class:"h-4 w-4 text-pink-600 focus:ring-pink-500 border-gray-300 rounded transition-colors",disabled:i.value},null,8,ie),[[$,t.rememberMe]]),e[13]||(e[13]=s("label",{for:"rememberMe",class:"ml-2 text-sm text-gray-700 cursor-pointer"}," Ingat saya ",-1))]),s("button",{type:"button",onClick:I,class:"text-sm text-pink-600 hover:text-pink-700 hover:underline transition-colors",disabled:i.value}," Lupa password? ",8,de)]),p.value>=3?(n(),o("div",le,e[14]||(e[14]=[s("div",{class:"flex items-center gap-2"},[s("span",{class:"text-yellow-600"},"⚠️"),s("span",{class:"text-yellow-800 text-sm"}," Terlalu banyak percobaan login. Silakan tunggu sebentar. ")],-1)]))):l("",!0),s("button",{type:"submit",disabled:i.value||!L.value||f.value,class:"w-full bg-gradient-to-r from-pink-500 to-purple-600 hover:from-pink-600 hover:to-purple-700 disabled:from-gray-300 disabled:to-gray-400 text-white font-medium py-3 px-4 rounded-xl transition-all duration-200 transform hover:scale-[1.02] disabled:hover:scale-100 focus:ring-2 focus:ring-pink-500/20 min-h-[44px] text-sm sm:text-base","aria-label":i.value?"Sedang masuk...":"Masuk ke aplikasi"},[i.value?(n(),o("span",me,e[15]||(e[15]=[s("svg",{class:"w-5 h-5 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1),s("span",null,"Sedang masuk...",-1)]))):(n(),o("span",pe,"Masuk"))],8,ue)],32)]),i.value?(n(),o("div",ce,e[17]||(e[17]=[y('<div class="bg-white/90 backdrop-blur-sm rounded-2xl p-6 shadow-xl border border-white/20 text-center max-w-xs mx-4" data-v-dad93f0e><div class="w-12 h-12 mx-auto bg-gradient-to-r from-pink-500 to-purple-600 rounded-full flex items-center justify-center mb-4 animate-pulse" data-v-dad93f0e><span class="text-white text-xl" data-v-dad93f0e>📿</span></div><div class="w-8 h-8 border-3 border-pink-200 border-t-pink-500 rounded-full animate-spin mx-auto mb-4" data-v-dad93f0e></div><p class="text-gray-700 font-medium" data-v-dad93f0e>Memverifikasi akun...</p></div>',1)]))):l("",!0)])]))}},we=U(be,[["__scopeId","data-v-dad93f0e"]]);export{we as default};
