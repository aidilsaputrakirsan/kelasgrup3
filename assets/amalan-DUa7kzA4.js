import{G as k,H as m,g as s,c as M}from"./index-Dflmv_7l.js";import{b as W,c as A,d as C}from"./date-p3dfQt3G.js";const S=k("amalan",()=>{const{getDashboardStats:d,getWeeklyData:f,updateAmalan:h}=m(),n=s(W()),l=s(A()),r=s(C()),v=s({}),o=s({}),c=s(!1),w=M(()=>{const a=(n.value-1)*7+1,e=Math.min(n.value*7,new Date(r.value,l.value,0).getDate());return{startDate:a,endDate:e}});async function i(){try{c.value=!0;const a=await d(n.value,l.value,r.value);v.value=a}catch(a){throw console.error("Failed to load dashboard data:",a),a}finally{c.value=!1}}async function D(a){try{c.value=!0;const e=await f(a,n.value,l.value,r.value);o.value[a]=e}catch(e){throw console.error("Failed to load member data:",e),e}finally{c.value=!1}}async function g(a,e,t){try{await h(a,e,t,n.value,l.value,r.value),o.value[a]||(o.value[a]={amalan:{}}),o.value[a].amalan||(o.value[a].amalan={}),o.value[a].amalan[e]=t,await i()}catch(u){throw console.error("Failed to update amalan:",u),u}}function y(a){n.value=a}function p(a){let e=n.value+a,t=l.value,u=r.value;e<1?(e=4,t--,t<1&&(t=12,u--)):e>4&&(e=1,t++,t>12&&(t=1,u++)),n.value=e,l.value=t,r.value=u}return{currentWeek:n,currentMonth:l,currentYear:r,dashboardData:v,memberData:o,isLoading:c,weekRange:w,loadDashboardData:i,loadMemberData:D,updateMemberAmalan:g,setCurrentWeek:y,changeWeek:p}});export{S as u};
