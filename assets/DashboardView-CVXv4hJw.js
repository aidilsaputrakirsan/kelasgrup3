const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-By2_0sRm.js","assets/index-CehO_JXt.css"])))=>i.map(i=>d[i]);
import{g as _,i as N,q as P,c as v,a as h,o as m,d as t,F as R,s as B,n as z,b as A,t as p,D as U,u as G,f as K,M as W,j as S,k as $,m as y,e as k,x as w,p as J,y as Q,_ as X}from"./index-By2_0sRm.js";import{g as Y,a as Z,u as tt}from"./amalan-CkcByT-e.js";import{_ as M}from"./AppButton-DUkufA0Y.js";function et(x,i=80){const n=_(!1),o=_(0),l=_(0);let a=!1;function r(b){window.scrollY===0&&(o.value=b.touches[0].clientY)}function d(b){if(window.scrollY===0&&!a){l.value=b.touches[0].clientY;const u=l.value-o.value;u>10&&(b.preventDefault(),n.value=u>i)}}async function f(){if(n.value&&!a){a=!0;try{await x()}finally{a=!1}}n.value=!1,o.value=0,l.value=0}return N(()=>{document.addEventListener("touchstart",r,{passive:!1}),document.addEventListener("touchmove",d,{passive:!1}),document.addEventListener("touchend",f)}),P(()=>{document.removeEventListener("touchstart",r),document.removeEventListener("touchmove",d),document.removeEventListener("touchend",f)}),{isPulling:n}}const st={class:"space-y-4"},at={class:"bg-white/10 backdrop-blur-sm rounded-2xl p-3 border border-white/20"},rt={class:"grid grid-cols-4 gap-3"},ot=["onClick"],nt={key:0,class:"absolute inset-0 bg-gradient-to-r from-pink-500 to-purple-500 rounded-xl animate-pulse-soft"},lt={class:"relative z-10"},it={class:"text-lg font-bold"},dt={class:"text-xs opacity-80 mt-1"},ut={class:"text-center bg-gradient-to-r from-pink-50 to-purple-50 rounded-xl p-4 border border-pink-200/50"},ct={class:"text-sm font-medium text-gray-700"},pt={__name:"WeekSelector",props:{currentWeek:Number,currentMonth:Number,currentYear:Number},emits:["week-changed"],setup(x){const i=x,n=v(()=>{const a=Y(i.currentWeek,i.currentMonth,i.currentYear),r=Z(i.currentMonth);return`${a.startDate}-${a.endDate} ${r} ${i.currentYear}`});function o(a){return a===i.currentWeek?"text-white shadow-lg transform scale-105":"text-gray-700 bg-white/50 hover:bg-white/70 hover:scale-102 shadow-sm"}function l(a){const r=Y(a,i.currentMonth,i.currentYear);return`${r.startDate}-${r.endDate}`}return(a,r)=>(m(),h("div",st,[t("div",at,[t("div",rt,[(m(),h(R,null,B(4,d=>t("button",{key:d,class:z([o(d),"relative py-4 px-4 rounded-xl font-semibold transition-all duration-300 text-sm group overflow-hidden"]),onClick:f=>a.$emit("week-changed",d)},[d===x.currentWeek?(m(),h("div",nt)):A("",!0),t("div",lt,[t("div",it,"W"+p(d),1),t("div",dt,p(l(d)),1)]),r[0]||(r[0]=t("div",{class:"absolute inset-0 bg-white/10 opacity-0 group-hover:opacity-100 transition-opacity duration-200 rounded-xl"},null,-1))],10,ot)),64))])]),t("div",ut,[t("p",ct,p(n.value),1),r[1]||(r[1]=t("p",{class:"text-xs text-gray-500 mt-2 italic"},' "وَاذْكُرْ رَبَّكَ كَثِيرًا" - Ingatlah Allah sebanyak-banyaknya ',-1))])]))}},mt={class:"relative flex items-center justify-center w-16 h-16 mx-auto mb-4"},gt={class:"absolute inset-0 w-16 h-16 transform -rotate-90",viewBox:"0 0 64 64"},vt=["stroke","stroke-dasharray"],ht={class:"relative z-10 w-12 h-12 bg-gradient-to-br from-pink-400 to-purple-500 rounded-full flex items-center justify-center text-white font-bold text-lg shadow-lg"},xt={class:"text-center font-bold text-gray-800 mb-2"},bt={class:"flex items-center justify-center gap-1 mb-4"},ft={class:"font-semibold text-gray-700"},kt={class:"space-y-3"},wt={class:"text-center"},yt={class:"text-2xl font-bold bg-gradient-to-r from-pink-500 to-purple-600 bg-clip-text text-transparent"},_t={class:"grid grid-cols-2 gap-3 text-center"},$t={class:"bg-gradient-to-br from-pink-50 to-pink-100 rounded-lg p-2"},At={class:"font-bold text-pink-600"},Ct={class:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-lg p-2"},Tt={class:"font-bold text-purple-600"},Dt={key:0,class:"absolute top-3 right-3"},Mt={__name:"MemberCard",props:{member:{type:String,required:!0},data:{type:Object,default:()=>({totalAmalan:0,completedAmalan:0})}},emits:["click"],setup(x){const i=x,n=v(()=>({totalAmalan:i.data.totalAmalan||0,completedAmalan:i.data.completedAmalan||0})),o=v(()=>U.length*7),l=v(()=>{const u=n.value.totalAmalan,s=o.value;if(s===0)return 0;const C=Math.round(u/s*100);return Math.min(C,100)}),a=v(()=>0),r=v(()=>2*Math.PI*28),d=v(()=>{const u=l.value;return u>=80?"rgb(34 197 94)":u>=60?"rgb(251 191 36)":u>=40?"rgb(249 115 22)":"rgb(239 68 68)"}),f=v(()=>l.value>=90||n.value.totalAmalan>=70),b=v(()=>({"ring-2 ring-pink-300/50 shadow-pink-200/50":l.value>=80}));return(u,s)=>(m(),h("div",{class:z([b.value,"relative bg-white/80 backdrop-blur-sm rounded-2xl p-6 cursor-pointer transition-all duration-300 hover:shadow-xl hover:scale-[1.02] group overflow-hidden border border-white/20"]),onClick:s[0]||(s[0]=C=>u.$emit("click"))},[s[7]||(s[7]=t("div",{class:"absolute top-0 right-0 w-20 h-20 bg-gradient-to-br from-pink-200/30 to-purple-200/30 rounded-full -mr-10 -mt-10"},null,-1)),t("div",mt,[(m(),h("svg",gt,[s[1]||(s[1]=t("circle",{cx:"32",cy:"32",r:"28",fill:"none",stroke:"rgb(230 227 232)","stroke-width":"4"},null,-1)),t("circle",{cx:"32",cy:"32",r:"28",fill:"none",stroke:d.value,"stroke-width":"4","stroke-linecap":"round","stroke-dasharray":`${r.value*l.value/100} ${r.value}`,class:"transition-all duration-1000 ease-out"},null,8,vt)])),t("div",ht,p(x.member),1)]),t("h4",xt,p(x.member),1),t("div",bt,[s[2]||(s[2]=t("span",{class:"text-orange-500 text-lg"},"🔥",-1)),t("span",ft,p(a.value)+" hari",1)]),t("div",kt,[t("div",wt,[t("div",yt,p(l.value)+"% ",1),s[3]||(s[3]=t("div",{class:"text-xs text-gray-500"},"Progress mingguan",-1))]),t("div",_t,[t("div",$t,[t("div",At,p(n.value.totalAmalan),1),s[4]||(s[4]=t("div",{class:"text-xs text-pink-500"},"Total Amalan",-1))]),t("div",Ct,[t("div",Tt,p(n.value.completedAmalan),1),s[5]||(s[5]=t("div",{class:"text-xs text-purple-500"},"Tercatat",-1))])])]),f.value?(m(),h("div",Dt,s[6]||(s[6]=[t("div",{class:"w-6 h-6 bg-gradient-to-r from-yellow-400 to-orange-500 rounded-full flex items-center justify-center"},[t("span",{class:"text-white text-xs"},"🏆")],-1)]))):A("",!0),s[8]||(s[8]=t("div",{class:"absolute inset-0 bg-gradient-to-br from-pink-400/20 to-purple-500/20 rounded-2xl opacity-0 group-hover:opacity-100 transition-opacity duration-300 pointer-events-none"},null,-1))],2))}},St={class:"min-h-screen bg-gradient-to-br from-pink-50 via-purple-50 to-indigo-50"},Lt={class:"bg-white/80 backdrop-blur-sm border-b border-white/20 sticky top-0 z-40 shadow-sm"},Et={class:"max-w-md mx-auto px-4 py-4"},jt={class:"flex items-center justify-between"},Wt={class:"flex items-center gap-2"},Yt={key:0,class:"absolute right-0 mt-2 w-48 bg-white/90 backdrop-blur-sm rounded-xl shadow-lg border border-white/20 py-2 z-50"},Nt={class:"max-w-md mx-auto p-4 space-y-6"},Pt={class:"bg-gradient-to-r from-pink-500 to-purple-600 rounded-2xl p-6 text-white shadow-xl"},Rt={class:"mt-4 text-sm opacity-90"},Bt={class:"bg-white/60 backdrop-blur-sm rounded-2xl p-6 border border-white/20 shadow-sm"},zt={class:"bg-white/60 backdrop-blur-sm rounded-2xl p-6 border border-white/20 shadow-sm"},It={class:"grid grid-cols-2 gap-4"},Vt={class:"bg-white/60 backdrop-blur-sm rounded-2xl p-6 border border-white/20 shadow-sm"},Ft={class:"grid grid-cols-2 gap-4"},qt={key:0,class:"bg-white/60 backdrop-blur-sm rounded-2xl p-6 border border-white/20 shadow-sm"},Ht={class:"grid grid-cols-3 gap-4"},Ot={class:"text-center bg-gradient-to-br from-pink-50 to-pink-100 rounded-xl p-4"},Ut={class:"text-2xl font-bold text-pink-600"},Gt={class:"text-center bg-gradient-to-br from-purple-50 to-purple-100 rounded-xl p-4"},Kt={class:"text-2xl font-bold text-purple-600"},Jt={class:"text-center bg-gradient-to-br from-indigo-50 to-indigo-100 rounded-xl p-4"},Qt={class:"text-xl font-bold text-indigo-600"},Xt={key:0,class:"fixed top-20 left-1/2 transform -translate-x-1/2 z-50"},se={__name:"DashboardView",setup(x){const i=J(),n=G(),o=tt(),l=K(),a=_(!1),r=_(!1),d=_(null),{isPulling:f}=et(C),b=v(()=>n.loginTime?new Date(parseInt(n.loginTime)).toLocaleString("id-ID",{hour:"2-digit",minute:"2-digit",day:"numeric",month:"short"}):"-"),u=v(()=>{const c=o.dashboardData;if(!c||typeof c!="object")return null;const e=Object.values(c),g=e.reduce((T,D)=>T+(D.totalAmalan||0),0),j=e.length>0?(g/e.length).toFixed(1):0,H=e.reduce((T,D,O)=>(D.totalAmalan||0)>(T.totalAmalan||0)?{...D,name:W[O]}:T,{}).name||"-";return{total:g,average:j,topMember:H}});N(async()=>{await s(),q()}),P(()=>{document.removeEventListener("click",E)});async function s(){try{await o.loadDashboardData()}catch{l.showToast("Gagal memuat data dashboard","error")}}async function C(){await s(),l.showToast("Data berhasil diperbarui","success")}async function L(){try{r.value=!0;const{api:c}=await X(async()=>{const{api:e}=await import("./index-By2_0sRm.js").then(g=>g.J);return{api:e}},__vite__mapDeps([0,1]));await c.syncData(),await s(),l.showToast("Sinkronisasi berhasil","success")}catch{l.showToast("Gagal sinkronisasi","error")}finally{r.value=!1}}async function I(c){o.setCurrentWeek(c),await s()}function V(c){i.push({name:"detail",params:{member:c},query:{week:o.currentWeek,month:o.currentMonth,year:o.currentYear}})}function F(){n.logout(),a.value=!1}function q(){document.addEventListener("click",E)}function E(c){d.value&&!d.value.contains(c.target)&&(a.value=!1)}return(c,e)=>(m(),h("div",St,[t("header",Lt,[t("div",Et,[t("div",jt,[e[3]||(e[3]=S('<div class="flex items-center gap-3"><div class="w-10 h-10 bg-gradient-to-br from-pink-500 to-purple-600 rounded-xl flex items-center justify-center"><span class="text-white text-lg">📿</span></div><div><h1 class="text-lg font-bold text-gray-800">Amalan Tracker</h1><p class="text-xs text-gray-500">بِسْمِ اللَّهِ الرَّحْمَنِ الرَّحِيم</p></div></div>',1)),t("div",Wt,[$(M,{variant:"ghost",size:"sm",loading:r.value,onClick:L,class:"text-gray-600 hover:text-pink-600"},{icon:y(()=>e[2]||(e[2]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1)])),_:1},8,["loading"]),t("div",{class:"relative",ref_key:"userMenuRef",ref:d},[$(M,{variant:"ghost",size:"sm",onClick:e[0]||(e[0]=g=>a.value=!a.value),class:"text-gray-600 hover:text-pink-600"},{default:y(()=>[k(p(w(n).user),1)]),_:1}),a.value?(m(),h("div",Yt,[t("button",{class:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-pink-50 transition-colors",onClick:F}," Keluar ")])):A("",!0)],512)])])])]),t("main",Nt,[t("div",Pt,[e[4]||(e[4]=S('<h2 class="text-xl font-bold mb-2">🌅 Focus Hari Ini</h2><div class="space-y-2"><div class="flex items-center gap-2"><span class="text-yellow-300">⭐</span><span>Dzikir pagi &amp; petang</span></div><div class="flex items-center gap-2"><span class="text-yellow-300">📖</span><span>Tilawah 2 halaman</span></div><div class="flex items-center gap-2"><span class="text-yellow-300">🤲</span><span>Istighfar 100x</span></div></div>',2)),t("div",Rt," Login: "+p(b.value),1)]),t("div",Bt,[e[5]||(e[5]=t("h3",{class:"font-bold text-gray-800 mb-4 flex items-center gap-2"},[t("span",null,"📅"),k(" Pilih Pekan ")],-1)),$(pt,{"current-week":w(o).currentWeek,"current-month":w(o).currentMonth,"current-year":w(o).currentYear,onWeekChanged:I},null,8,["current-week","current-month","current-year"])]),t("div",zt,[e[6]||(e[6]=t("div",{class:"flex justify-between items-center mb-4"},[t("h3",{class:"font-bold text-gray-800 flex items-center gap-2"},[t("span",null,"👥"),k(" Anggota Keluarga ")]),t("p",{class:"text-sm text-gray-500"},"Tap untuk detail")],-1)),t("div",It,[(m(!0),h(R,null,B(w(W),g=>(m(),Q(Mt,{key:g,member:g,data:w(o).dashboardData[g]||{},onClick:j=>V(g)},null,8,["member","data","onClick"]))),128))])]),t("div",Vt,[e[11]||(e[11]=t("h3",{class:"font-bold text-gray-800 mb-4 flex items-center gap-2"},[t("span",null,"⚡"),k(" Aksi Cepat ")],-1)),t("div",Ft,[$(M,{variant:"outline",class:"w-full bg-gradient-to-r from-blue-50 to-blue-100 border-blue-200 text-blue-700 hover:from-blue-100 hover:to-blue-200",onClick:e[1]||(e[1]=g=>c.$router.push("/report"))},{icon:y(()=>e[7]||(e[7]=[t("span",{class:"text-lg"},"📊",-1)])),default:y(()=>[e[8]||(e[8]=k(" Laporan Bulanan "))]),_:1,__:[8]}),$(M,{variant:"secondary",class:"w-full bg-gradient-to-r from-emerald-50 to-emerald-100 border-emerald-200 text-emerald-700 hover:from-emerald-100 hover:to-emerald-200",onClick:L,loading:r.value},{icon:y(()=>e[9]||(e[9]=[t("span",{class:"text-lg"},"🔄",-1)])),default:y(()=>[e[10]||(e[10]=k(" Sinkronisasi "))]),_:1,__:[10]},8,["loading"])])]),u.value?(m(),h("div",qt,[e[15]||(e[15]=t("h3",{class:"font-bold text-gray-800 mb-4 flex items-center gap-2"},[t("span",null,"📊"),k(" Statistik Pekan Ini ")],-1)),t("div",Ht,[t("div",Ot,[t("div",Ut,p(u.value.total||0),1),e[12]||(e[12]=t("div",{class:"text-xs text-pink-500 uppercase tracking-wide"},"Total Amalan",-1))]),t("div",Gt,[t("div",Kt,p(u.value.average||0),1),e[13]||(e[13]=t("div",{class:"text-xs text-purple-500 uppercase tracking-wide"},"Rata-rata",-1))]),t("div",Jt,[t("div",Qt,p(u.value.topMember||"-"),1),e[14]||(e[14]=t("div",{class:"text-xs text-indigo-500 uppercase tracking-wide"},"Teraktif",-1))])])])):A("",!0),e[16]||(e[16]=S('<div class="bg-gradient-to-r from-emerald-50 to-teal-50 rounded-2xl p-6 border border-emerald-200/50 shadow-sm"><div class="text-center"><div class="text-2xl mb-3">🌙</div><p class="text-sm text-gray-700 font-medium leading-relaxed"> &quot;Dan ingatlah kepada Tuhanmu dalam hatimu dengan merendahkan diri dan rasa takut&quot; </p><p class="text-xs text-gray-500 mt-2">- QS Al-A&#39;raf: 205</p></div></div>',1))]),w(f)?(m(),h("div",Xt,e[17]||(e[17]=[t("div",{class:"bg-white/90 backdrop-blur-sm rounded-full p-3 shadow-lg border border-white/20"},[t("svg",{class:"w-6 h-6 animate-spin text-pink-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})])],-1)]))):A("",!0)]))}};export{se as default};
